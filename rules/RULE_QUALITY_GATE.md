# RULE_QUALITY_GATE

## Trigger
Any new rule is being created - whether:
- Verbalized by user in conversation
- Commented in code
- Researched/extracted from documents
- Generated by automation

## Action Sequence
1. **Capture the Intent** - What is the rule trying to achieve?
2. **Check for Multiple Actions** - If rule contains more than ONE distinct action:
   - Split into separate rules
   - Each rule = ONE trigger → ONE action
   - Link related rules via naming convention
3. **Structure Review** - Reformat to standard template:
   ```
   # RULE_NAME (UPPERCASE_SNAKE_CASE)
   ## Trigger - When does this fire?
   ## Action - What ONE thing happens?
   ## Skip Conditions - When to NOT apply
   ## Category - For indexing
   ```
4. **Conflict Check** - Does this contradict existing rules?
5. **Clarity Rewrite** - Reword for:
   - Unambiguous interpretation
   - Actionable (not vague guidance)
   - Testable (can verify if followed)
6. **Add to Index** - Update 00_RULE_INDEX.md

## Single Responsibility Test
Ask: "Does this rule do exactly ONE thing?"

❌ BAD: "Always commit changes AND update the tracker AND notify the user"
✅ GOOD: Split into COMMIT_CHANGES, UPDATE_TRACKER, NOTIFY_USER

## Naming Convention
- Related rules share prefix: `COMMIT_FORMAT`, `COMMIT_TIMING`, `COMMIT_MESSAGE`
- Action-oriented: verb or clear noun
- No vague names like `GENERAL_WORKFLOW`

## Anti-Patterns to Fix
| Problem | Fix |
|---------|-----|
| "Should generally..." | Make specific: "Must always..." or "Never..." |
| "Consider doing X" | Make actionable: "Do X when Y" |
| Multiple IF conditions | Split into separate rules |
| Circular dependencies | Identify and document execution order |
| Overlapping triggers | Merge or clarify precedence |

## Output
- Refined rule file in `.warp/rules/`
- Index entry in `00_RULE_INDEX.md`
- If split: multiple rule files with cross-references

## Skip Conditions
- Rule is already in standard format with single action
- User explicitly says "keep as-is"

## Category
meta, quality_assurance
